---
title: CSS 布局
date: 2022-01-26 13:30:41
tags:
 - web
categories:
 - web
---

## CSS 布局的三种机制

> **网页布局的核心——就是用 CSS 来摆放盒子** 。

**普通流** （标准流）

* **块级元素**会独占一行，**从上向下**顺序排列；
  * **常用元素：div、hr、p、h1~h6、ul、ol、dl、form、table**
* **行内元素**会按照顺序，**从左到右**顺序排列，碰到父元素边缘则自动换行；

  * **常用元素：span、a、i、em 等**

**浮动**

* **让盒子从普通流中浮**起来,主要作用让多个块级盒子一行显示。

**定位**

* **将盒子定**在浏览器的某一个**位**置——CSS 离不开定位，特别是后面的 js 特效。

###  浮动

> 元素的浮动是指设置了浮动属性的元素会脱离标准普通流的控制，移动到指定位置。

**作用**

1. 让多个盒子(div)水平排列成一行 ，使得浮动成为布局的重要手段。

2. 可以实现盒子的左右对齐等等..
3. 浮动最早是用来控制图片 ，实现 文字环绕图片的效果 。

```css
选择器 { float: 属性值; }
```

| **属性值** | **描述**                  |
| ---------- | ------------------------- |
| **none**   | **元素不浮动（默认值** ） |
| **left**   | **元素向左**浮动          |
| **right**  | **元素向右**浮动          |

> **float 会事盒子脱离**标准流， 浮动会使盒子变成行级块元素，所有的块级元素都看不到浮动元素


### 清除浮动

* 由于浮动元素不再占用原文档流的位置，所以它会对后面的元素排版产生影响
* 准确地说，并不是清除浮动，而是清除浮动后造成的影响

清除浮动主要为了解决父级元素因为子级浮动引起内部高度为 0 的问题。清除浮动之后， 父级就会根据浮动的子盒子自动检测高度。父级有了高度，就不会影响下面的标准流了


```css
选择器{clear:属性值;}   clear 清除  
```

| 属性值 | 描述                                       |
| ------ | ------------------------------------------ |
| left   | 不允许左侧有浮动元素（清除左侧浮动的影响） |
| right  | 不允许右侧有浮动元素（清除右侧浮动的影响） |
| both   | 同时清除左右两侧浮动的影响                 |

> **但是我们实际工作中， 几乎只用 clear: both;**

#### 额外标签法(隔墙法)

> 是W3C推荐的做法是通过在浮动元素末尾添加一个空的标签例如 <div style="clear:both"></div>，或则其他标签br等亦可。

* **优点： 通俗易懂，书写方便**
* **缺点： 添加许多无意义的标签，结构化较差。**

#### 父级添加 overflow 属性方法


```css
可以给父级添加： overflow为 hidden| auto| scroll  都可以实现。
```

**优点：**  代码简洁

**缺点：**  内容增多时候容易造成不会自动换行导致内容被隐藏掉，无法显示需要溢出的元素。



#### 使用 after 伪元素清除浮动


**:after 方式为空元素额外标签法的升级版，好处是不用单独加标签了**

**使用方法：**

```css
.clearfix:after {  
    content: ""; 
    display: block; 
    height: 0; 
    clear: both; 
    visibility: hidden;  
}   

.clearfix {*zoom: 1;}   /* IE6、7 专有 */
```

* 优点： 符合闭合浮动思想  结构语义化正确
* 缺点： 由于 IE6-7 不支持:after，使用 zoom:1 触发 hasLayout。



#### 使用双伪元素清除浮动

**使用方法：**

```
.clearfix:before,.clearfix:after { 
  content:"";
  display:table; 
}
.clearfix:after {
 clear:both;
}
.clearfix {
  *zoom:1;
}
```

* **优点：  代码更简洁**
* **缺点：  由于 IE6-7 不支持:after，使用 zoom:1 触发 hasLayout。**

```css
"""浮动的元素 没有块儿级一说 本身多大浮起来之后就只能占多大"""
只要是设计到页面的布局一般都是用浮动来提前规划好
<style>
        body {
            margin: 0;
        }
        #d1 {
            height: 200px;
            width: 200px;
            background-color: red;
            float: left;  /*浮动  浮到空中往左飘*/
        }
        #d2 {
            height: 200px;
            width: 200px;
            background-color: greenyellow;
            float: right;   /*浮动 浮到空中往右飘*/
        }
</style>
```




```css
"""
解决浮动带来的影响 推导步骤
  1.自己加一个div设置高度
  2.利用clear属性
    #d4 {
            clear: left;  /*该标签的左边(地面和空中)不能有浮动的元素*/
        }
  3.通用的解决浮动带来的影响方法
    在写html页面之前 先提前写好处理浮动带来的影响的 css代码
    .clearfix:after {
            content: '';
            display: block;
            clear:both;
        }
    之后只要标签出现了塌陷的问题就给该塌陷的标签加一个clearfix属性即可
    上述的解决方式是通用的 到哪都一样 并且名字就叫clearfix
"""
```

###  定位

定位也是用来布局的，它有两部分组成：

`定位 = 定位模式 + 边偏移`

定位的盒子，是通过边偏移来移动位置的。

| 边偏移属性 | 示例           | 描述                                                       |
| ---------- | -------------- | ---------------------------------------------------------- |
| `top`      | `top: 80px`    | **顶端**偏移量，定义元素相对于其父元素 **上边线的距离** 。 |
| `bottom`   | `bottom: 80px` | **底部**偏移量，定义元素相对于其父元素 **下边线的距离** 。 |
| `left`     | `left: 80px`   | **左侧**偏移量，定义元素相对于其父元素 **左边线的距离** 。 |
| `right`    | `right: 80px`  | **右侧**偏移量，定义元素相对于其父元素**右边线的距离**     |

#### 定位模式 (position)

```css
选择器 { position: 属性值; }
```

| 值         | 语义         |
| ---------- | ------------ |
| `static`   | **静态**定位 |
| `relative` | **相对**定位 |
| `absolute` | **绝对**定位 |
| `fixed`    | **固定**定位 |

#### 静态定位(static) - 了解

* **静态定位**是元素的默认定位方式，无定位的意思。它相当于 border 里面的 none， 不要定位的时候用。
* 静态定位 按照标准流特性摆放位置，它没有边偏移。
* 静态定位在布局时我们几乎不用的

#### 相对定位(relative) - 重要

* 相对定位是元素相对于它  原来在标准流中的位置 来说的。（自恋型）

- 相对定位的特点：（务必记住）

  * 相对于 自己原来在标准流中位置来移动的

  * 原来 **在标准流的区域继续占有** ，后面的盒子仍然以标准流的方式对待它。


#### 绝对定位(absolute) - 重要

- 绝对定位是元素以带有定位的父级元素来移动位置 （拼爹型）
  1. 完全脱标 —— 完全不占位置；
  2. 父元素没有定位 ，则以浏览器为准定位（Document 文档）。  
  3. 父元素要有定位
      * 将元素依据最近的已经定位（绝对、固定或相对定位）的父元素（祖先）进行定位。


- 绝对定位的特点：（务必记住）

  * 绝对是以带有定位的父级元素来移动位置 （拼爹型） 如果父级都没有定位，则以浏览器文档为准移动位置

  * 不保留原来的位置，完全是脱标的。


- 因为绝对定位的盒子是拼爹的，所以要和父级搭配一起来使用。

> 定位口诀 —— 子绝父相



#### 固定定位(fixed) - 重要

**固定定位**是**绝对定位**的一种特殊形式： （认死理型）   如果说绝对定位是一个矩形 那么 固定定位就类似于正方形

1. **完全脱标** —— 完全不占位置；
2. 只认**浏览器的可视窗口** —— `浏览器可视窗口 + 边偏移属性` 来设置元素的位置；

    * 跟父元素没有任何关系；单独使用的
    * 不随滚动条滚动。

 **提示** ：IE 6 等低版本浏览器不支持固定定位。

 **注意** ：

1. 在使用固定定位时，如果盒子中没有内容，需要指定宽度
2. 设置底部内容图片的 **顶部 ****`margin`** ，可以让底部盒子初始显示在顶部图片的下方。





### 定位(position)的扩展

#### 绝对定位的盒子居中

> **注意** ：**绝对定位/固定定位的盒子**不能通过设置 `margin: auto` 设置**水平居中**
>

1. `left: 50%;`：让**盒子的左侧**移动到 **父级元素的水平中心位置** ；
2. `margin-left: -100px;`：让盒子**向左**移动 **自身宽度的一半** 。

#### 堆叠顺序（z-index）

在使用**定位**布局时，可能会 **出现盒子重叠的情况** 。

加了定位的盒子，默认 **后来者居上** ， 后面的盒子会压住前面的盒子。

应用 `z-index` 层叠等级属性可以 **调整盒子的堆叠顺序** 。如下图所示：

`z-index` 的特性如下：

1. **属性值** ： **正整数** 、**负整数**或  **0** ，默认值是 0，数值越大，盒子越靠上；
2. 如果 **属性值相同** ，则按照书写顺序， **后来居上** ；
3. **数字后面不能加单位** 。

 **注意** ：`z-index` 只能应用于 **相对定位** 、**绝对定位**和**固定定位**的元素，其他 **标准流** 、**浮动**和**静态定位**无效。

> 案例演示：堆叠顺序。
>

#### 定位改变 display 属性

前面我们讲过， display 是 显示模式， 可以改变显示模式有以下方式:

* 可以用 inline-block  转换为行内块
* 可以用浮动 float 默认转换为行内块（类似，并不完全一样，因为浮动是脱标的）
* 绝对定位和固定定位也和浮动类似， 默认转换的特性 转换为行内块。

所以说， 一个行内的盒子，如果加了 **浮动** 、**固定定位**和 **绝对定位** ，不用转换，就可以给这个盒子直接设置宽度和高度等。

**同时注意：**

浮动元素、绝对定位(固定定位）元素的都不会触发外边距合并的问题。 （我们以前是用 padding border overflow 解决的）

也就是说，我们给盒子改为了浮动或者定位，就不会有垂直外边距合并的问题了。

 **注意** ：

1. **边偏移**需要和**定位模式**联合使用， **单独使用无效** ；
2. `top` 和 `bottom` 不要同时使用；
3. `left` 和 `right` 不要同时使用。